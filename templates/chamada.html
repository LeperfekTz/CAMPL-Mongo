{% extends "base/base.html" %}

{% block title %}Chamada{% endblock %}

{% block content %}
<h1>Chamada de Alunos</h1>

<form method="GET" action="{{ url_for('chamada') }}" class="filter-form">
    <label for="classe">Classe:</label>
    <select name="classe_id" id="classe">
        <option value="">Selecione uma Classe</option>
        {% for classe in classes %}
            <option value="{{ classe['_id'] }}" {% if request.args.get('classe_id') == classe['_id'] %} selected {% endif %}>
                {{ classe['classe'] }}
            </option>
        {% endfor %}
    </select>
    <button type="submit" class="filter-button">Filtrar</button>
</form>

<h2>Alunos da Classe Selecionada</h2>

<form method="POST" action="{{ url_for('salvar_presenca') }}">
    <input type="hidden" name="classe_id" value="{{ request.args.get('classe_id') }}">
    <div class="table-container">
        <table>
            <thead>
                <tr>
                    <th>Nome</th>
                    <th>Presente</th>
                </tr>
            </thead>
            <tbody>
                {% for aluno in alunos %}
                <tr>
                    <th>{{ aluno['nome'] }}</th>
                    <td>
                        <label>
                            <input type="hidden" name="aluno_id[]" value="{{ aluno['_id'] }}">
                            <input type="checkbox" name="presenca_{{ aluno['_id'] }}">
                        </label>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    <button type="submit" class="save-button">Salvar Presen√ßa</button>
</form>
{% endblock %}
