{% extends "base/base.html" %}

{% block title %}Adicionar Classe{% endblock %}

{% block extra_head %}
<script>
    function showPopup(message) {
        alert(message);  // Exibe o pop-up com a mensagem
    }
</script>
{% endblock %}

{% block content %}
<h1>Adicionar Nova Classe</h1>

{% with messages = get_flashed_messages() %}
    {% if messages %}
        <script>
            {% for message in messages %}
                showPopup("{{ message }}");
            {% endfor %}
        </script>
    {% endif %}
{% endwith %}

<form method="POST" action="{{ url_for('adicionar_classe') }}">
    <label for="classe_nome">Nome da Classe:</label>
    <input type="text" name="classe_nome" id="classe_nome" required>
    <button type="submit">Adicionar Classe</button>
</form>
{% endblock %}

{% block extra_scripts %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const checkboxes = document.querySelectorAll('.presenca');
        const contadorPresentes = document.getElementById('contador-presentes');

        function atualizarContador() {
            const presentes = Array.from(checkboxes).filter(checkbox => checkbox.checked).length;
            if (contadorPresentes) {
                contadorPresentes.textContent = `Alunos que faltaram: ${presentes}`;
            }
        }

        checkboxes.forEach(checkbox => {
            checkbox.addEventListener('change', atualizarContador);
        });

        atualizarContador();
    });
</script>
{% endblock %}
